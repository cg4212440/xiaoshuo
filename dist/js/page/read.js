define(["jquery","template","base64"],function(c,a,o){var i=1,s=null;function n(){c.ajax({url:"/book/reader-list?article="+i,dataType:"json",success:function(o){var n,t,e=o.jsonp;n=e,(t=document.createElement("script")).src=n,window.duokan_fiction_chapter=function(o){var o=JSON.parse(c.base64().decode(o));c(".book").empty(),c(".cont_one").html(i+"/"+s),a(c(".read").html(),o,".book")},document.head.appendChild(t)}})}c.ajax({url:"/book/menu-list",dataType:"json",success:function(o){s=o.item.toc.length,c(".cont_sum").html(s)}}),n(),c(".book").on("click",function(){c(".mask").show()}),c(".mask").on("click",function(){c(this).hide()}),c(".reader__next").on("click",function(o){o.stopPropagation(),i++,n()}),c(".reader__prev").on("click",function(o){o.stopPropagation(),i--,n()}),c(".catalogue").on("click",function(o){o.stopPropagation(),a(c(".readlist").html(),{list:s},".catalogue_div"),console.log(list)})});